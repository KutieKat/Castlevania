#pragma once

// Structs
class CGameObject;
typedef CGameObject* LPGAMEOBJECT;

struct CCollisionEvent;
typedef CCollisionEvent* LPCOLLISIONEVENT;

struct CCollisionEvent
{
	LPGAMEOBJECT obj;
	float t, nx, ny;
	float dx, dy;

	CCollisionEvent(float t, float nx, float ny, float dx = 0, float dy = 0, LPGAMEOBJECT obj = NULL)
	{ 
		this->t = t;
		this->nx = nx;
		this->ny = ny;
		this->dx = dx;
		this->dy = dy;
		this->obj = obj; 
	}

	static bool compare(const LPCOLLISIONEVENT &a, LPCOLLISIONEVENT &b)
	{
		return a->t < b->t;
	}
};

// Enumerations
enum Direction {
	None,
	Left,
	Right,
	Up,
	Down
};

enum Visibility {
	Visible,
	Hidden
};

enum HealthType
{
	Empty,
	Player,
	Enemy
};

// Math
#define PI 3.14f

// Window
#define WINDOW_CLASS_NAME L"Castlevania"
#define MAIN_WINDOW_TITLE L"Castlevania"

#define SCREEN_WIDTH 528
#define SCREEN_HEIGHT 528

#define MAX_FRAME_RATE 120

#define BACKGROUND_WIDTH 1536

// Game
#define DEFAULT_GAME_TIME 300
#define DEFAULT_WAITING_TIME 3000

// Scenes
#define INTRO_SCENE 0
#define CUT_SCENE_1 1
#define PLAY_SCENE_1 2
#define CUT_SCENE_2 3
#define PLAY_SCENE_2_1 4
#define PLAY_SCENE_2_2 5

// Input
#define DIRECTINPUT_VERSION 0x0800
#define KEYBOARD_BUFFER_SIZE 1024

// Blackboard
#define BLACKBOARD_HEIGHT 80

// Simon
#define SIMON_WALK_SPEED 0.1f 
#define SIMON_SLOW_WALK_SPEED 0.08f
#define SIMON_JUMP_SPEED 0.55f
#define SIMON_GRAVITY 0.0025f

#define SIMON_STATE_IDLE 1
#define SIMON_STATE_WALK 2
#define SIMON_STATE_SIT 3
#define SIMON_STATE_JUMP 4
#define SIMON_STATE_SIT_AND_ATTACK 5
#define SIMON_STATE_STAND_AND_ATTACK 6
#define SIMON_STATE_AUTO_WALK 7
#define SIMON_STATE_DELAY 8
#define SIMON_STATE_DIE 9
#define SIMON_STATE_STAND_AND_THROW 10
#define SIMON_STATE_CUT_SCENE_AUTO_WALK 11
#define SIMON_STATE_WATCH 12
#define SIMON_STATE_IDLE_ON_STAIR 13
#define SIMON_STATE_WALK_UPSTAIR 14
#define SIMON_STATE_WALK_DOWNSTAIR 15
#define SIMON_STATE_WALK_UPSTAIR_AND_ATTACK 16
#define SIMON_STATE_WALK_DOWNSTAIR_AND_ATTACK 17
#define SIMON_STATE_DEFLECT 18
#define SIMON_STATE_STAND_ON_STAIR_AND_THROW 19

#define SIMON_BBOX_WIDTH 35
#define SIMON_BBOX_HEIGHT 62

#define SIMON_ANI_IDLE_LEFT	0
#define SIMON_ANI_WALK_LEFT 1
#define SIMON_ANI_SIT_LEFT 2
#define SIMON_ANI_JUMP_LEFT 3
#define SIMON_ANI_SIT_LEFT_AND_ATTACK 4
#define SIMON_ANI_STAND_LEFT_AND_ATTACK 5
#define SIMON_ANI_DELAY_LEFT 6
#define SIMON_ANI_IDLE_ON_STAIR_UP_LEFT 7
#define SIMON_ANI_IDLE_ON_STAIR_DOWN_LEFT 8
#define SIMON_ANI_WALK_UPSTAIR_LEFT 9
#define SIMON_ANI_WALK_DOWNSTAIR_LEFT 10
#define SIMON_ANI_WALK_UPSTAIR_LEFT_AND_ATTACK 11
#define SIMON_ANI_WALK_DOWNSTAIR_LEFT_AND_ATTACK 12
#define SIMON_ANI_DEFLECT_LEFT 13
#define SIMON_ANI_DIE_LEFT 14

#define SIMON_ANI_IDLE_RIGHT 15
#define SIMON_ANI_WALK_RIGHT 16
#define SIMON_ANI_SIT_RIGHT 17
#define SIMON_ANI_JUMP_RIGHT 18
#define SIMON_ANI_SIT_RIGHT_AND_ATTACK 19
#define SIMON_ANI_STAND_RIGHT_AND_ATTACK 20
#define SIMON_ANI_DELAY_RIGHT 21
#define SIMON_ANI_IDLE_ON_STAIR_UP_RIGHT 22
#define SIMON_ANI_IDLE_ON_STAIR_DOWN_RIGHT 23
#define SIMON_ANI_WALK_UPSTAIR_RIGHT 24
#define SIMON_ANI_WALK_DOWNSTAIR_RIGHT 25
#define SIMON_ANI_WALK_UPSTAIR_RIGHT_AND_ATTACK 26
#define SIMON_ANI_WALK_DOWNSTAIR_RIGHT_AND_ATTACK 27
#define SIMON_ANI_DEFLECT_RIGHT 28
#define SIMON_ANI_DIE_RIGHT 29
#define SIMON_ANI_WATCH 30

#define SIMON_INVISIBILITY_TIME 3000
#define SIMON_DELAY_TIME 900
#define SIMON_DEFAULT_LIVES 3
#define SIMON_DEFAULT_HEARTS 5
#define SIMON_DEFAULT_SCORE 0

// Ground
#define GROUND_BBOX_WIDTH 32
#define GROUND_BBOX_HEIGHT 36

// BigCandle
#define BIG_CANDLE_BBOX_WIDTH 31
#define BIG_CANDLE_BBOX_HEIGHT 63
#define BIG_CANDLE_GRAVITY 0.0025f

// SmallCandle
#define SMALL_CANDLE_BBOX_WIDTH 15
#define SMALL_CANDLE_BBOX_HEIGHT 24
#define SMALL_CANDLE_GRAVITY 0.0025f

// Whip
#define WHIP_LEVEL_1 1
#define WHIP_LEVEL_2 2
#define WHIP_LEVEL_3 3

#define WHIP_ANI_LEVEL_1_LEFT 0
#define WHIP_ANI_LEVEL_1_RIGHT 1
#define WHIP_ANI_LEVEL_2_LEFT 2
#define WHIP_ANI_LEVEL_2_RIGHT 3
#define WHIP_ANI_LEVEL_3_LEFT 4
#define WHIP_ANI_LEVEL_3_RIGHT 5

#define WHIP_LEVEL_1_BBOX_WIDTH 115
#define WHIP_LEVEL_2_BBOX_WIDTH 115
#define WHIP_LEVEL_3_BBOX_WIDTH 144
#define WHIP_BBOX_HEIGHT 66

#define WHIP_NORMAL_POWER 1
#define WHIP_DOUBLE_POWER 2
#define WHIP_TRIPLE_POWER 3

// Item
#define ITEM_STATE_APPEAR 1
#define ITEM_GRAVITY 0.002f
#define ITEM_DISPLAY_TIME 4000

// MoneyBag
#define MONEY_BAG_MOVE_UP_SPEED 0.05f

#define MONEY_BAG_BBOX_WIDTH 29
#define MONEY_BAG_BBOX_HEIGHT 29
#define MONEY_BAG_SCORE 1000

// EasterEgg
#define EASTER_EGG_BBOX_WIDTH 32
#define EASTER_EGG_BBOX_HEIGHT 32

// BigHeart
#define BIG_HEART_BBOX_WIDTH 24
#define BIG_HEART_BBOX_HEIGHT 20
#define BIG_HEART_HEARTS 5

// Dagger
#define DAGGER_BBOX_WIDTH 32
#define DAGGER_BBOX_HEIGHT 18
#define DAGGER_ANI_RIGHT 0
#define DAGGER_ANI_LEFT 1
#define DAGGER_MOVE_SPEED 0.5f

// MorningStar
#define MORNING_STAR_BBOX_WIDTH 32
#define MORNING_STAR_BBOX_HEIGHT 32

// HealthBar
#define HEALTH_BAR_MAX_VOLUMES 16

// HealthVolume
#define HEALTH_VOLUME_ANI_EMPTY 0
#define HEALTH_VOLUME_ANI_PLAYER 1
#define HEALTH_VOLUME_ANI_ENEMY 2

// Bat
#define BAT_STATE_FLY_RIGHT_CROSS 1
#define BAT_STATE_FLY_OVAL 2

#define BAT_FLY_RIGHT_CROSS_SPEED 0.017f
#define BAT_FLY_OVAL_SPEED 0.03f

// Helicopter
#define HELICOPTER_FLY_SPEED 0.01f

// Effect
#define EFFECT_DISPLAY_TIME 300

// Brick
#define BRICK_BBOX_WIDTH 31
#define BRICK_BBOX_HEIGHT 31

// TopStair
#define TOP_STAIR_BBOX_WIDTH 25
#define TOP_STAIR_BBOX_HEIGHT 25

// BottomStair
#define BOTTOM_STAIR_BBOX_WIDTH 12
#define BOTTOM_STAIR_BBOX_HEIGHT 12

// NextScene
#define NEXT_SCENE_BBOX_WIDTH 5
#define NEXT_SCENE_BBOX_HEIGHT 10

// PreviousScene
#define PREVIOUS_SCENE_BBOX_WIDTH 5
#define PREVIOUS_SCENE_BBOX_HEIGHT 10

// MovingBar
#define MOVING_BAR_MOVE_SPEED 0.025f

#define MOVING_BAR_BBOX_WIDTH 64
#define MOVING_BAR_BBOX_HEIGHT 16

// RedMoneyBag
#define RED_MONEY_BAG_BBOX_WIDTH 29
#define RED_MONEY_BAG_BBOX_HEIGHT 29
#define RED_MONEY_BAG_SCORE 100

// PurpleMoneyBag
#define PURPLE_MONEY_BAG_BBOX_WIDTH 29
#define PURPLE_MONEY_BAG_BBOX_HEIGHT 29
#define PURPLE_MONEY_BAG_SCORE 400

// WhiteMoneyBag
#define WHITE_MONEY_BAG_BBOX_WIDTH 29
#define WHITE_MONEY_BAG_BBOX_HEIGHT 29
#define WHITE_MONEY_BAG_SCORE 700

// Crown
#define CROWN_BBOX_WIDTH 29
#define CROWN_BBOX_HEIGHT 31
#define CROWN_SCORE 2000

// SmallHeart
#define SMALL_HEART_MOVE_SPEED 0.02f

#define SMALL_HEART_BBOX_WIDTH 15
#define SMALL_HEART_BBOX_HEIGHT 15

#define SMALL_HEART_HEARTS 2

// BigDoubleShot
#define BIG_DOUBLE_SHOT_BBOX_WIDTH 41
#define BIG_DOUBLE_SHOT_BBOX_HEIGHT 41

// DoubleShot
#define DOUBLE_SHOT_BBOX_WIDTH 31
#define DOUBLE_SHOT_BBOX_HEIGHT 31

// Boomerang
#define BOOMERANG_STATE_STATIC 1
#define BOOMERANG_STATE_MOVE 2

#define BOOMERANG_ANI_STATIC 0
#define BOOMERANG_ANI_MOVE 1

#define BOOMERANG_MOVE_SPEED 0.1f

#define BOOMERANG_BBOX_WIDTH 27
#define BOOMERANG_BBOX_HEIGHT 27

#define BOOMERANG_MOVABLE_AREA_WIDTH 200

// BreakableBrick
#define BREAKABLE_BRICK_BBOX_WIDTH 31
#define BREAKABLE_BRICK_BBOX_HEIGHT 31

// Breaking
#define BREAKING_PIECES 4

// Enemy
#define ENEMY_DEFAULT_DAMAGES 1
#define ENEMY_DEFAULT_ATTACKS 1
#define ENEMY_DELAY_TIME 500

// RedBat
#define RED_BAT_AREA_RADIUS 100

#define RED_BAT_STATE_STATIC 1
#define RED_BAT_STATE_MOVE 2

#define RED_BAT_ANI_STATIC_LEFT 0
#define RED_BAT_ANI_MOVE_LEFT 1
#define RED_BAT_ANI_STATIC_RIGHT 2
#define RED_BAT_ANI_MOVE_RIGHT 3

#define RED_BAT_MOVE_SPEED 0.1f

#define RED_BAT_BBOX_WIDTH 31
#define RED_BAT_BBOX_HEIGHT 31
#define RED_BAT_SCORE 300

// SpearKnight
#define SPEAR_KNIGHT_WALK_SPEED 0.05f 
#define SPEAR_KNIGHT_GRAVITY 0.0025f

#define SPEAR_KNIGHT_STATE_WALK 1
#define SPEAR_KNIGHT_STATE_DELAY 2

#define SPEAR_KNIGHT_ANI_WALK_LEFT 0
#define SPEAR_KNIGHT_ANI_DELAY_LEFT 1

#define SPEAR_KNIGHT_ANI_WALK_RIGHT 2
#define SPEAR_KNIGHT_ANI_DELAY_RIGHT 3

#define SPEAR_KNIGHT_BBOX_WIDTH 31
#define SPEAR_KNIGHT_BBOX_HEIGHT 63

#define SPEAR_KNIGHT_SCORE 400
#define SPEAR_KNIGHT_ATTACKS 2